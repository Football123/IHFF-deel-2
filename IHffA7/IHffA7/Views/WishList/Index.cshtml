@model IEnumerable<IHffA7.Models.WishlistViewModel>
@{
    ViewBag.Title = "Index";
}

@if (ViewBag.succes != null)
{
    <div class="alert alert-success">
        @ViewBag.succes
    </div>
}

@if (ViewBag.errors != null)
{
    <div class="alert alert-danger">
        @ViewBag.errors
    </div>
}

<h2>WISHLIST</h2>
<table>
    <tr>
        <th>Item</th>
        <th>aantal kaarten</th>
        <th>Prijs per kaart</th>
        <th>Prijs Totaal</th>
    </tr>
    @if (Model != null)
    {
        foreach (var c in Model)
        {
            if (c.Activity.typeActivity == 1)
            {
                <tr>
                    <td>
                        @c.Activity.Filmscreenings.Single().Films.title
                        <br />
                        @c.Activity.startTime
                        <br />
                        @c.Activity.Filmscreenings.Single().Rooms.name
                        <br />
                        @c.Activity.Filmscreenings.Single().Rooms.Locations.name

                    </td>
                    <td>
                        @c.NumberOfPersons
                    </td>
                    <td>
                        @c.Activity.price
                    </td>
                    <td>
                       @c.totalprice
                    </td>
                    <td>
                        @Html.HiddenFor(activivyId =>  c.Activity.id, null)
                        <a class="btn btn-danger edit" href="/WishList/EditActivityFromSesWishlist?activityId=10">Wijzig</a>
                        @Html.ActionLink("Wijzig", "EditActivityFromSesWishlist", "WishList", new
                                           {
                                               activityId = c.Activity.id
                                           }, new { @class = "btn btn-info edit" })

                        @Html.ActionLink("Verwijder", "RemoveActivityFromSesWishlist", "WishList", new
                   {
                       activityId = c.Activity.id
                   }, new { @class = "btn btn-default" })
                        
                    </td>
                </tr>
                <tr></tr>
            }
            if (c.Activity.typeActivity == 2)
            {
                <tr>
                    <td>
                        @c.Activity.Specialscreenings.Single().Specials.title
                        <br />
                        @c.Activity.startTime
                        <br />
                        @c.Activity.Specialscreenings.Single().Rooms.name
                        <br />
                        @c.Activity.Specialscreenings.Single().Rooms.Locations.name

                    </td>
                    <td>
                        @c.NumberOfPersons
                    </td>
                    <td>
                        @c.Activity.price
                    </td>
                    <td>
                        @c.totalprice
                    </td>
                    <td>
                        @Html.ActionLink("Verwijder", "RemoveActivityFromSesWishlist", "WishList", new
                   {
                       activityId = c.Activity.id
                   }, new { @class = "btn btn-default" })

                        @Html.ActionLink("Wijzig", "EditActivityFromSesWishlist", "WishList", new
                                           {
                                               activityId = c.Activity.id
                                           }, new { @class = "btn btn-info edit" })

                    </td>
                </tr>
                <tr></tr>
            }
            if (c.Activity.typeActivity == 3)
            {
                <tr>
                    <td>
                        @c.Activity.Restaurants.Single().Locations.name
                        <br />
                        @c.Activity.startTime
                        <br />

                    </td>
                    <td>
                        @c.NumberOfPersons
                    </td>
                    <td>
                        @c.Activity.price
                    </td>
                    <td>
                        @c.totalprice
                    </td>
                    <td>
                        @Html.ActionLink("Wijzig", "EditActivityFromSesWishlist", "WishList", new
                                           {
                                               activityId = c.Activity.id
                                           }, new { @class = "btn btn-info edit" })


                        @Html.ActionLink("Verwijder", "RemoveActivityFromSesWishlist", "WishList", new
                   {
                       activityId = c.Activity.id
                   }, new { @class = "btn btn-default" })

                    </td>
                </tr>
                <tr></tr>
            }
        }
    }
    
        <tr>
            }
            <td>------------------------------------</td>
        </tr>
       
    </table>

    @Html.ActionLink("Add acty 10 to list to wishlists", "AddItemToSesWishlist", "WishList", new
{
    numberOfpersones = 2,
    activityId = 10,
}, new { @class = "btn btn-default" })
@Html.ActionLink("Add acty 12 to list to wishlists", "AddItemToSesWishlist", "WishList", new
{
    numberOfpersones = 1,
    activityId = 12,
}, new { @class = "btn btn-default" })
    <br /><br />
@Html.ActionLink("SaveWishlist", "SaveWishlist", "WishList", new
{
    numberOfpersones = 1,
    activityId = 1,
}, new { @class = "btn btn-default" })

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        <div class="form-group">
            @Html.Label("Enter activity code", htmlAttributes: new { @class = "control-label col-md-2", @required = "true" })
            <div class="col-md-10">
                @Html.TextBox("wislistId",null, htmlAttributes: new { @class = "form-control col-md-2" })
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="GetWishlist" class="btn btn-default" />
            </div>
        </div>
    </div>
}

@Html.ActionLink("Betalen", "PayWishlist", "WishList",null, new { @class = "btn btn-primary" })

<div id="modalEdit"></div>

<script>
 /*   $(function () {
        $(".edit").click(function (e) {
            var dataToPost = $("#MyForm").serialize()
            $.ajax(
            {
                type: "POST",
                data: JSON.stringify(dataToPost),
                url: "Working/Save",
                contentType: 'application/json; charset=utf-8'
            })
        })
    })*/


    $(document).ready(function () {

        $(".edit").click(function()
        {
            var activityId = $(this).closest("hidden").val;
            $.ajax({
                url: '/WishList/EditActivityFromSesWishlist',
                type: 'GET',
                dataType: "json",
                contenType: 'application/json',
                data: activityId
            }),function(data){
                $("#modelEdit").html(""+data+"")
            }
        })
    });
	

        /*var myData = {
            Parameter1: $("#someElementId").val(),
            Parameter2: $("#anotherElementId").val(),
            ListParameter: { /* Define IEnumerable collections as json array as well */}
            // more params here
        }  
        $.ajax({
            url: 'someUrl',
            type: 'GET',
            dataType: "json",
            contentType: 'application/json',
            data: JSON.stringify(myData)
        },function(data){
            $('#modalEdit').html(""+ data+ "");
        }); /*
</script>





